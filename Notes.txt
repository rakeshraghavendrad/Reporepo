import re
import pandas as pd

# Define your path
path = "C:\\Users\\kk052484\\lc...
input_file = path + "behave_tests.log"

# Keep same structure: keyword â†’ list of (trigger, pattern)
kw = {
    "Prompt on compelling photographic or email evidence returned": [
        ("evidence", r'"([^"]+)"'),
        ("input_", r'"([^"]+)"'),
        ("is_compelling", r'"([^"]+)"')
    ]
}

data = []

# Read log file
with open(input_file, "r", encoding="utf-8") as infile:
    lines = infile.readlines()

# Process each keyword
for keyword, trigger_patterns in kw.items():
    match_found = False
    row = {"check": keyword}

    for line in lines:
        if keyword in line:
            values = []
            for trigger, pattern in trigger_patterns:
                if trigger in line:
                    match = re.search(pattern, line)
                    row[trigger] = match.group(1).strip() if match else "Not found"
                else:
                    row[trigger] = "Trigger not found"
            match_found = True
            break

    if not match_found:
        for trigger, _ in trigger_patterns:
            row[trigger] = "Not available in the log, hence no evidence"

    data.append(row)

# Convert to DataFrame
df = pd.DataFrame(data)
print(df)
