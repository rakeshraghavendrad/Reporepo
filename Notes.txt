import re
import pandas as pd

# Log file path
path = "C:\\Users\\kk052484\\lc...
input_file = path + "behave_tests.log"
output_file = path + "behave_tests_mod.log"

# Define keyword and patterns (one key, multiple values)
kw = {
    "Prompt on compelling photographic or email evidence returned": {
        "patterns": {
            "evidence": r"evidence[^\w]?=[^\w]?([^\@]+?)\x1b",
            "input_": r"input_[^\w]?=[^\w]?([^\@]+?)\x1b",
            "is_compelling": r"is_compelling[^\w]?=[^\w]?([^\@]+?)\x1b"
        }
    }
}

# Process log
data = []

with open(input_file, "r", encoding="utf-8") as infile:
    lines = infile.readlines()

for keyword, config in kw.items():
    patterns = config["patterns"]
    for line in lines:
        if keyword in line:
            row = {"check": keyword}
            for field, pattern in patterns.items():
                match = re.search(pattern, line)
                row[field] = match.group(1).strip() if match else "Not found"
            data.append(row)
            break  # remove if you expect multiple log entries per keyword

# Convert to DataFrame
df = pd.DataFrame(data)
print(df)
